---
title: æ¨¡æ¿æ–¹æ³•æ¨¡å¼
description: æ¨¡æ¿æ–¹æ³•æ¨¡å¼
# status: new
---

# æ¨¡æ¿æ–¹æ³•æ¨¡å¼

![å›¾ç‰‡çš„æ ·å¼](./img/template-method-2x.png)

<P style="text-indent:2em;">
æ¨¡æ¿æ–¹æ³•å®ƒé€‚ç”¨äºä¸€æ•´ä¸ªä¸šåŠ¡çš„é€»è¾‘å¤§ä½“æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¥½å¤šåœ°æ–¹éƒ½åœ¨ç”¨ï¼Œä½†æ˜¯æŸä¸€å¤©çªç„¶æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œ
å’Œè¿™ä¸ªé€»è¾‘å‡ ä¹ä¸€æ ·ï¼Œä½†æ˜¯åˆæœ‰ä¸€äº›ç»†èŠ‚ä¸åŒï¼Œé‚£ä¸ºäº†é¿å…ä»£ç é‡å¤ï¼Œä¿è¯ä»¥åä¹Ÿå¯ä»¥æ–°å¢ä»£ç æ—¶ä¸å¤§é¢ç§¯æ”¹åŠ¨ä»£ç ï¼Œ
å°±å¯ä»¥è€ƒè™‘æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚å®ƒå¯ä»¥ä½¿ä»£ç å¤ç”¨ï¼Œå¯ä»¥æ§åˆ¶æ‰©å±•ï¼Œæ˜“äºç»´æŠ¤ï¼Œä½†æ˜¯ä¼šé™åˆ¶å­ç±»çš„çµæ´»æ€§ï¼Œè¿˜ä½¿å¾—ä»£ç å˜å¤æ‚ã€‚
</p>

### ğŸ€ä»£ç æ ·ä¾‹

<P style="text-indent:2em;">
å¹³æ—¶ä½¿ç”¨è±†æµ†æœºæ—¶ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥éƒ½æ˜¯é€‰æ‹©æ–°é²œçš„è±†å­ï¼Œç„¶åå°†è±†å­å’Œé…æ–™å¼€å§‹æµ¸æ³¡3Hï¼Œæœ€åå°†è±†å­å’Œé…æ–™æ”¾å…¥è±†æµ†æœºæ¦¨æ±å°±è¡Œäº†ã€‚
ä½†æ˜¯æ”¾å•¥é…æ–™ï¼Œæ”¾ä¸æ”¾é…æ–™ï¼Œéƒ½ä¼šæ”¹å˜å…·ä½“æ­¥éª¤ã€‚
</p>

```java
public abstract class SoyaMilk {
    /*
     * æ¨¡æ¿æ–¹æ³•ï¼šå¯ä»¥åšæˆfinalï¼Œä¸è®©å­ç±»å»è¦†ç›–
     */
    final void make() {
        select();
        if (customerWantCondiment()) {
            addCondiment();
        }
        soak();
        beat();
    }

    // 1ï¸âƒ£é€‰ææ–™
    void select() {
        System.out.println("ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ–°é²œçš„è±†å­");
    }

    // 2ï¸âƒ£ç¬¬äºŒæ­¥ï¼šæ·»åŠ ä¸åŒçš„é…æ–™ï¼šæŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å…·ä½“å®ç°
    abstract void addCondiment();

    // 3ï¸âƒ£æµ¸æ³¡
    void soak() {
        System.out.println("ç¬¬ä¸‰æ­¥ï¼šè±†å­å’Œé…æ–™å¼€å§‹æµ¸æ³¡3H");
    }

    // 4ï¸âƒ£æ¦¨æ±
    void beat() {
        System.out.println("ç¬¬å››æ­¥ï¼šè±†å­å’Œé…æ–™æ”¾å…¥è±†æµ†æœºæ¦¨æ±");
    }

    // é’©å­æ–¹æ³•ï¼šå†³å®šæ˜¯å¦éœ€è¦æ·»åŠ é…æ–™
    boolean customerWantCondiment() {
        // é»˜è®¤æƒ…å†µä¸‹æ˜¯è¦åŠ é…æ–™çš„, é‚£äº›éœ€è¦é…æ–™çš„è±†æµ†å“ç§å°±ä¸éœ€è¦è¦†å†™
        return true;
    }
}
```

<P style="text-indent:2em;">
è¿™æ—¶å€™å¤§å®¶çš„æ­¥éª¤éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä½•ä½“ç°ä¸ªæ€§å‘¢ï¼Ÿæˆ‘ä»¬å»å®ç°ä¸€ä¸‹è¿™ä¸ªç±»ï¼Œä¸€æ ·çš„æ­¥éª¤å°±ä¸é‡å†™äº†ï¼Œ
addCondiment()æ˜¯å†³å®šæ¯ä¸ªå­ç±»å·®å¼‚çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªã€‚
</p>

=== "åŸå‘³è±†æµ†"

    ```java
    public class OriginalSoyaMilk extends SoyaMilk{
        @Override
        void addCondiment() {
            // æ·»åŠ é…æ–™çš„æ–¹æ³• ç©ºå®ç° å³å¯ åŸå‘³è±†æµ†ä¸éœ€è¦é…æ–™
        }

        /*
        * åŸå‘³è±†æµ†ä¸éœ€è¦æ·»åŠ ï¼Œè®°å¾—è¦è¿”å›false
        */
        @Override
        boolean customerWantCondiment() {
            return false;
        }
    }
    ```

=== "èŠ±ç”Ÿè±†æµ†"

    ```java
    public class PeanutSoyaMilk extends SoyaMilk {
        @Override
        void addCondiment() {
            System.out.println("ç¬¬äºŒæ­¥ï¼šåŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ");
        }
    }
    ```

=== "çº¢è±†è±†æµ†"

    ```java
    public class ReadBeanSoyaMilk extends SoyaMilk{
        @Override
        void addCondiment() {
            System.out.println("ç¬¬äºŒæ­¥ï¼šåŠ å…¥ä¸Šå¥½çš„çº¢è±†");
        }
    }
    ```

=== "å’–å•¡è±†æµ†?"

    ```java
    public class CoffeeSoyalMilk extends SoyaMilk{
        @Override
        void addCondiment() {
            System.out.println("ç¬¬äºŒæ­¥ï¼šåŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ");
        }

        /*ä¹Ÿå¯ä»¥æ”¹å…¶ä»–çš„æ¨¡æ¿æ­¥éª¤*/
        @Override
        void beat() {
            System.out.println("ç¬¬å››æ­¥ï¼šè±†å­å’Œé…æ–™æ”¾å…¥å’–å•¡æœºåšå’–å•¡ï¼Œä¸¾ä¸ªä¾‹å­ğŸŒ°è€Œå·²");
        }
    }
    ```

<P style="text-indent:2em;">
å…¶ä¸­æ¨¡æ¿ç±»é‡Œé¢çš„é’©å­ğŸªæ–¹æ³•å¯ä»¥çœ‹æƒ…å†µå»é™¤ã€‚
</p>

### ğŸ”ä½¿ç”¨æ–¹å¼

<P style="text-indent:2em;">
ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥åšè±†æµ†å°±å¯ä»¥äº†ï¼Œæ”¾åˆ°springæ¡†æ¶é‡Œé¢å°±æ˜¯äº¤ç»™å®¹å™¨ç®¡ç†ç”¨åˆ°å°±æ³¨å…¥
</p>

=== "Client.java"

    ```java
    public class Client {
        public static void main(String[] args) {
            System.out.println("=======åˆ¶ä½œçº¢è±†è±†æµ†=======");
            SoyaMilk redBeanSoyaMilk = new ReadBeanSoyaMilk();
            redBeanSoyaMilk.make();

            System.out.println("=======åˆ¶ä½œèŠ±ç”Ÿè±†æµ†=======");
            SoyaMilk peanutSoyaMilk = new PeanutSoyaMilk();
            peanutSoyaMilk.make();

            System.out.println("=======åˆ¶ä½œåŸå‘³è±†æµ†=======");
            OriginalSoyaMilk originalSoyaMilk = new OriginalSoyaMilk();
            originalSoyaMilk.make();

            System.out.println("=======åˆ¶ä½œå’–å•¡è±†æµ†=======");
            CoffeeSoyalMilk coffeeSoyalMilk = new CoffeeSoyalMilk();
            coffeeSoyalMilk.make();
        }
    }
    ```

=== "è¾“å‡ºç»“æœ"

    ```txt
    =======åˆ¶ä½œçº¢è±†è±†æµ†=======
    ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ–°é²œçš„è±†å­
    ç¬¬äºŒæ­¥ï¼šåŠ å…¥ä¸Šå¥½çš„çº¢è±†
    ç¬¬ä¸‰æ­¥ï¼šè±†å­å’Œé…æ–™å¼€å§‹æµ¸æ³¡3H
    ç¬¬å››æ­¥ï¼šè±†å­å’Œé…æ–™æ”¾å…¥è±†æµ†æœºæ¦¨æ±
    =======åˆ¶ä½œèŠ±ç”Ÿè±†æµ†=======
    ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ–°é²œçš„è±†å­
    ç¬¬äºŒæ­¥ï¼šåŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ
    ç¬¬ä¸‰æ­¥ï¼šè±†å­å’Œé…æ–™å¼€å§‹æµ¸æ³¡3H
    ç¬¬å››æ­¥ï¼šè±†å­å’Œé…æ–™æ”¾å…¥è±†æµ†æœºæ¦¨æ±
    =======åˆ¶ä½œåŸå‘³è±†æµ†=======
    ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ–°é²œçš„è±†å­
    ç¬¬ä¸‰æ­¥ï¼šè±†å­å’Œé…æ–™å¼€å§‹æµ¸æ³¡3H
    ç¬¬å››æ­¥ï¼šè±†å­å’Œé…æ–™æ”¾å…¥è±†æµ†æœºæ¦¨æ±
    =======åˆ¶ä½œå’–å•¡è±†æµ†=======
    ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ–°é²œçš„è±†å­
    ç¬¬äºŒæ­¥ï¼šåŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ
    ç¬¬ä¸‰æ­¥ï¼šè±†å­å’Œé…æ–™å¼€å§‹æµ¸æ³¡3H
    ç¬¬å››æ­¥ï¼šè±†å­å’Œé…æ–™æ”¾å…¥å’–å•¡æœºåšå’–å•¡ï¼Œä¸¾ä¸ªä¾‹å­ğŸŒ°è€Œå·²
    ```