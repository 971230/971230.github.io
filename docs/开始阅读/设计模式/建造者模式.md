---
title: å»ºé€ è€…æ¨¡å¼
description: å»ºé€ è€…æ¨¡å¼
# status: new
---

# å»ºé€ è€…æ¨¡å¼

![å›¾ç‰‡çš„æ ·å¼](./img/builder-zh-2x.png)


å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡ Hutool å·¥å…·ç±»åº“ï¼Œä½ å¯èƒ½ä½¿ç”¨è¿‡ GenericBuilder è¿™ä¸ªæ„å»ºå·¥å…·ï¼Œå®ƒæ˜¯å»ºé€ è€…æ¨¡å¼çš„å®Œç¾ä½“ç°ã€‚
å®ƒä¸»è¦å°±æ˜¯å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œã€Œå°†å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä¸å…¶è¡¨ç¤ºè¿›è¡Œåˆ†ç¦»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„æ„å»ºè¿‡ç¨‹éå¸¸å¤æ‚ï¼Œ
åŒ…å«å¤šä¸ªæ­¥éª¤æˆ–éœ€è¦å¤šä¸ªå‚æ•°æ—¶ï¼Œå»ºé€ è€…æ¨¡å¼å¯ä»¥å°†è¿™äº›æ­¥éª¤åˆ†è§£ï¼Œä½¿å¾—æ„å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°å’Œæ˜“äºç®¡ç†ã€‚ã€[^1]
[^1]: æ¥è‡ªäºDeepSeek AI

ä½†æ˜¯å®ƒæœ‰ä»£ç çš„é‡å¤ï¼Œæ„å»ºé¡ºåºä¹Ÿæ˜¯å›ºå®šçš„ã€‚


### ğŸ€ä»£ç æ ·ä¾‹

è¿™ä¸ªä¾‹å­å…¶å®è¿˜æ˜¯å¤ªâ€œç†è®ºâ€äº†ï¼Œåªæ˜¯å°†å°†å¯ä»¥è¯´æ¸…æ¥šå•¥æ˜¯å»ºé€ è€…æ¨¡å¼è€Œå·²ã€‚

```java
@ToString
public class Computer {
    private String cpu;
    private String memory;
    private String hardDisk;
    private String monitor;

    /* ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢ç›´æ¥å®ä¾‹åŒ– */
    private Computer() {
    }

    /* é™æ€å†…éƒ¨ç±»ä½œä¸ºå»ºé€ è€… */
    public static class Builder {
        private String cpu;
        private String memory;
        private String hardDisk;
        private String monitor;

        /* è¿™é‡Œçš„setæ–¹æ³•è¿”å›thisæ‰å¯ä»¥è¾¾åˆ°é“¾å¼æ•ˆæœ */
        public Builder setCpu(String cpu) {
            this.cpu = cpu;
            return this;
        }

        public Builder setMemory(String memory) {
            this.memory = memory;
            return this;
        }

        public Builder setHardDisk(String hardDisk) {
            this.hardDisk = hardDisk;
            return this;
        }

        public Builder setMonitor(String monitor) {
            this.monitor = monitor;
            return this;
        }

        public Computer build() {
            Computer computer = new Computer();
            computer.cpu = this.cpu;
            computer.memory = this.memory;
            computer.hardDisk = this.hardDisk;
            computer.monitor = this.monitor;
            return computer;
        }
    }
}
```

### ğŸ”ä½¿ç”¨æ–¹å¼

```java
public class Test {
    public static void main(String[] args) {
        // ä½¿ç”¨å»ºé€ è€…æ¨¡å¼åˆ›å»ºComputerå¯¹è±¡
        Computer computer = new Computer.Builder()
            .setCpu("Intel i7")
            .setMemory("16GB")
            .setHardDisk("1TB SSD")
            .setMonitor("27-inch 4K")
            .build();
        // è¾“å‡ºComputerå¯¹è±¡
        System.out.println(computer);
    }
}
```

### ğŸŒ æ›´å¥½çš„ä¾‹å­

äºæ˜¯é’ˆå¯¹è¿™ç§åç†è®ºåŒ–çš„ä¾‹å­ï¼Œè¿™é‡Œå°±æœ‰ä¸€ä¸ª hutool çš„ GenericBuilder å·¥å…·çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œè¿™æ ·å…¶å®æ›´èƒ½æ˜ç™½ï¼Œ
è¿™ä¸ªä¾‹å­ç»†èŠ‚å¾ˆå¤šï¼Œç”¨åˆ°å‡½æ•°å¼æ¥å£ï¼Œå¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ä¹Ÿæœ‰å„ç§æ”¯æŒã€‚[^2]
[^2]: ä¾‹å­æœ€æ—©æ¥è‡ªäºå‰é¡¹ç›®ï¼Œå½“æ—¶é¡¹ç›®é‡Œå› å®‰å…¨é—®é¢˜ä¸å…è®¸ä½¿ç”¨hutoolå·¥å…·


=== "Builder"

    ```java
    public class Builder<T> implements Build<T> {
        private static final long serialVersionUID = 123456789L;

        private final Supplier<T> constructor;

        private final List<Consumer<T>> modifiers1 = new ArrayList<>();

        private final List<Consumer<T>> modifiers2 = new ArrayList<>();

        public Builder(Supplier<T> supplier) {
            this.constructor = supplier;
        }

        public static <T> Builder<T> of(Supplier<T> supplier) {
            return new Builder<>(supplier);
        }

        public <U> Builder<T> with(BiConsumer<T, U> consumer, U value) {
            Consumer<T> tmpConsumer = instance -> consumer.accept(instance, value);
            modifiers1.add(tmpConsumer);
            return this;
        }

        public <U> Builder<T> with(Function<T, List<U>> function, U value) {
            Consumer<T> tmpConsumer = instance -> function.apply(instance).add(value);
            modifiers1.add(tmpConsumer);
            return this;
        }

        public <K, V> Builder<T> with(KeyValueConsumer<T, K, V> consumer, K key, V value) {
            Consumer<T> tmpConsumer = instance -> consumer.accept(instance, key, value);
            modifiers2.add(tmpConsumer);
            return this;
        }

        @Override
        public T build() {
            T value = constructor.get();
            modifiers1.forEach(instance -> instance.accept(value));
            modifiers2.forEach(instance -> instance.accept(value));
            modifiers1.clear();
            modifiers2.clear();
            return value;
        }
    }
    ```

=== "Build"

    ```java
    public interface Build<T> extends Serializable {
        T build();
    }
    ```

=== "KeyValueConsumer"

    ```java
    @FunctionalInterface
    public interface KeyValueConsumer<T, K, V> {

        /**
         * æ¥æ”¶æ•°æ®
         *
         * @param t     æ•°æ®å¯¹è±¡
         * @param key   key
         * @param value value
         */
        void accept(T t, K key, V value);


        /**
         * And then key value consumer.
         *
         * @param after the after
         * @return the key value consumer
         */
        default KeyValueConsumer<T, K, V> andThen(
            KeyValueConsumer<? super T, ? super K, ? super V> after) {
            Objects.requireNonNull(after);

            return (t, k, v) -> {
                accept(t, k, v);
                after.accept(t, k, v);
            };
        }
    }
    ```

## â›… ä½¿ç”¨

ä½¿ç”¨ä¸Šé¢å…¶å®å¤§å·®ä¸å·®ï¼Œä¸»è¦æ˜¯å°è£…çš„ç»†èŠ‚å’Œå®Œæˆåº¦ã€‚

```java
public class TestBuilder {
    public static void main(String[] args) {
        Computer computer = Builder.of(Computer::new)
                .with(Computer::setCpu, "AMD R7-5800H")
                .with(Computer::setMemory, "32GB")
                .with(Computer::setHardDisk, "1TB SSD")
                .with(Computer::setMonitor, "27-inch 4K Samsung")
                .build();
        System.out.println(computer);
    }
}
```